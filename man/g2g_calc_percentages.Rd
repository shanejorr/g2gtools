% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/calculations.R
\name{g2g_calc_percentages}
\alias{g2g_calc_percentages}
\title{Calculate percentages from long-form data}
\usage{
g2g_calc_percentages(
  .data,
  grouping_columns,
  count_column = NULL,
  add_n = "none"
)
}
\arguments{
\item{.data}{A data frame in long format.}

\item{grouping_columns}{Character vector of column names to group by when calculating percentages.
Percentages are calculated for the values in the last column, within the context of the
other grouping columns.}

\item{count_column}{Character, an optional column name containing values to sum instead of
counting rows. Default is NULL, which means each row counts as 1.}

\item{add_n}{One of 'none', '.percent_pretty', or a column name from grouping_columns. Controls how to
add count information:
- 'none': No additional count information (default)
- '.percent_pretty': Add count to the formatted percentage (e.g., "75\% (n=10)")
- \if{html}{\out{<column name>}}: Add count to the specified column from grouping_columns}
}
\value{
A tibble with the original grouping columns plus:
\itemize{
\item \code{.n_response}: count/sum for each group combination
\item \code{.n_total}: total count/sum within parent groups
\item \code{.percent}: the calculated percentage as a decimal (between 0 and 1)
\item \code{.percent_pretty}: formatted percentage string (always included)
}
}
\description{
This function calculates percentages from data in long format. It groups by the specified columns
and calculates the percentage representation of each category within its parent groups.
}
\examples{
# Example with a simple dataset
data <- data.frame(
  category = rep(c("A", "B"), each = 10),
  subcategory = c(rep("X", 7), rep("Y", 3), rep("X", 4), rep("Y", 6))
)

# Calculate percentages of subcategories within categories
g2g_calc_percentages(data, grouping_columns = c("category", "subcategory"))

}
